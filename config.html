<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuraci√≥n - Aprendo</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="global-styles.css">
    <link rel="stylesheet" href="config.css">
</head>
<body>
    <div class="container">
        <header class="header-secondary">
            <button class="btn-back" onclick="goBack()">
                <span>‚Üê</span> Volver al Inicio
            </button>
            <h1>‚öôÔ∏è Configuraci√≥n del Sistema</h1>
            <p>Personaliza los filtros y preferencias de la aplicaci√≥n</p>
        </header>

        <main>
            <!-- Configuraci√≥n Unificada -->
            <div class="section-card">
                <div class="section-header">
                    <h2>‚öôÔ∏è Configuraci√≥n del Sistema</h2>
                    <p class="section-description">
                        Todos los cambios se guardan autom√°ticamente. Personaliza los filtros y preferencias de la aplicaci√≥n.
                    </p>
                </div>

                <!-- Informaci√≥n sobre guardado autom√°tico -->
                <div class="auto-save-info">
                    <div class="info-card-small">
                        <span class="info-icon-small">üíæ</span>
                        <span class="info-text">Guardado autom√°tico activado</span>
                    </div>
                </div>

                <!-- Filtros por Correo Electr√≥nico -->
                <div class="filter-section">
                    <div class="filter-section-header">
                        <h3><span class="section-emoji">üìß</span> Filtros por Correo Electr√≥nico</h3>
                        <span class="section-hint">Excluye usuarios por su direcci√≥n de correo</span>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">Agregar correo individual</label>
                        <div class="input-row">
                            <input type="email" 
                                   id="emailInput" 
                                   placeholder="ejemplo@dominio.com"
                                   class="input-field">
                            <button class="btn btn-primary" onclick="addEmailFilter()">
                                <span>‚ûï</span> Agregar
                            </button>
                        </div>
                        
                        <div class="textarea-section">
                            <label class="input-label" for="bulkEmailInput">
                                Agregar m√∫ltiples correos
                                <span class="label-hint">(uno por l√≠nea)</span>
                            </label>
                            <textarea id="bulkEmailInput" 
                                      rows="4" 
                                      placeholder="correo1@ejemplo.com&#10;correo2@ejemplo.com&#10;usuario@dominio.cl"></textarea>
                            <button class="btn btn-secondary" onclick="addBulkEmails()">
                                <span>üìã</span> Agregar en Lote
                            </button>
                        </div>
                    </div>

                    <div class="filters-list">
                        <div class="filters-list-header">
                            <h4>Correos Filtrados</h4>
                            <span class="count-badge" id="emailCount">0</span>
                        </div>
                        <div id="emailFilters" class="filters-container">
                            <!-- Los filtros de email se agregar√°n din√°micamente aqu√≠ -->
                        </div>
                    </div>
                </div>

                    <!-- Filtros por RUT -->
                    <div class="filter-section">
                        <div class="filter-section-header">
                            <h3><span class="section-emoji">üÜî</span> Filtros por RUT</h3>
                            <span class="section-hint">Excluye usuarios por su n√∫mero de RUT</span>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">Agregar RUT individual</label>
                            <div class="input-row">
                                <input type="text" 
                                       id="rutInput" 
                                       placeholder="12.345.678-9 o 12345678-9"
                                       class="input-field">
                                <button class="btn btn-primary" onclick="addRutFilter()">
                                    <span>‚ûï</span> Agregar
                                </button>
                            </div>
                            
                            <div class="textarea-section">
                                <label class="input-label" for="bulkRutInput">
                                    Agregar m√∫ltiples RUTs
                                    <span class="label-hint">(uno por l√≠nea)</span>
                                </label>
                                <textarea id="bulkRutInput" 
                                          rows="4" 
                                          placeholder="12.345.678-9&#10;98.765.432-1&#10;11222333-4"></textarea>
                                <button class="btn btn-secondary" onclick="addBulkRuts()">
                                    <span>üìã</span> Agregar en Lote
                                </button>
                            </div>
                        </div>

                        <div class="filters-list">
                            <div class="filters-list-header">
                                <h4>RUTs Filtrados</h4>
                                <span class="count-badge" id="rutCount">0</span>
                            </div>
                            <div id="rutFilters" class="filters-container">
                                <!-- Los filtros de RUT se agregar√°n din√°micamente aqu√≠ -->
                            </div>
                        </div>
                    </div>

                    <!-- Reportes de Usuarios Eliminados -->
                    <div class="filter-section">
                        <div class="filter-section-header">
                            <h3><span class="section-emoji">üìä</span> Historial de Usuarios Filtrados</h3>
                            <span class="section-hint">Consulta el registro de usuarios excluidos</span>
                        </div>
                        <div class="report-controls">
                            <button class="btn btn-info" onclick="showEliminatedReport()">
                                <span>üëÅÔ∏è</span> Ver Reporte
                            </button>
                            <button class="btn btn-secondary" onclick="exportEliminatedReport()">
                                <span>üíæ</span> Exportar
                            </button>
                            <button class="btn btn-warning" onclick="clearEliminatedHistory()">
                                <span>üßπ</span> Limpiar Historial
                            </button>
                        </div>
                        
                        <div id="eliminatedReport" class="report-container" style="display: none;">
                            <h4>√öltimos Usuarios Excluidos</h4>
                            <div id="eliminatedList" class="eliminated-list">
                                <!-- El reporte se mostrar√° aqu√≠ -->
                            </div>
                        </div>
                    </div>

                    <!-- Configuraci√≥n General -->
                    <div class="filter-section">
                        <div class="filter-section-header">
                            <h3><span class="section-emoji">üîß</span> Preferencias del Sistema</h3>
                            <span class="section-hint">Ajusta el comportamiento general de la aplicaci√≥n</span>
                        </div>

                        <div class="settings-grid">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <label class="setting-label">
                                        <span class="setting-icon">ÔøΩ</span>
                                        Guardado Autom√°tico de Archivos
                                    </label>
                                    <span class="setting-description">Guarda autom√°ticamente los archivos procesados</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="autoSave" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <label class="setting-label">
                                        <span class="setting-icon">üìù</span>
                                        Logs Detallados
                                    </label>
                                    <span class="setting-description">Muestra informaci√≥n detallada en la consola</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="detailedLogs" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-item full-width">
                                <div class="setting-info">
                                    <label class="setting-label" for="maxFiles">
                                        <span class="setting-icon">üìÅ</span>
                                        Archivos Simult√°neos
                                    </label>
                                    <span class="setting-description">M√°ximo de archivos a procesar al mismo tiempo</span>
                                </div>
                                <div class="number-input-group">
                                    <input type="number" id="maxFiles" value="10" min="1" max="50" class="input-field number-input">
                                    <span class="number-unit">archivos</span>
                                </div>
                            </div>

                            <div class="setting-item full-width">
                                <div class="setting-info">
                                    <label class="setting-label" for="consolidationMode">
                                        <span class="setting-icon">üìï</span>
                                        Modo de Consolidaci√≥n de Informes
                                    </label>
                                    <span class="setting-description">Define c√≥mo se organizar√° la informaci√≥n al consolidar m√∫ltiples archivos Excel</span>
                                </div>
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="consolidationMode" value="separate" id="consolidationSeparate" checked>
                                        <div class="radio-content">
                                            <span class="radio-label">üìë Hojas Separadas</span>
                                            <span class="radio-description">Cada archivo se guardar√° en una hoja diferente del Excel consolidado</span>
                                        </div>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="consolidationMode" value="single" id="consolidationSingle">
                                        <div class="radio-content">
                                            <span class="radio-label">üìÑ Hoja √önica</span>
                                            <span class="radio-description">Todos los datos se consolidar√°n en una sola hoja continua</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Botones de Control -->
                    <div class="action-buttons">
                        <button class="btn btn-warning" onclick="resetConfiguration()">
                            <span>üîÑ</span> Restablecer Todo
                        </button>
                        <button class="btn btn-danger" onclick="clearAllFilters()">
                            <span>üóëÔ∏è</span> Limpiar Filtros
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Configuraci√≥n - Aprendo v0.1.0</p>
        </footer>
    </div>

    <script src="config.js"></script>
</body>
